services:
  # -------------------------------
  # API Service
  # -------------------------------
  - type: web
    name: airman-api
    env: docker
    plan: free
    dockerfilePath: ./backend/Dockerfile
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: airman-db
          property: connectionString

      - key: REDIS_HOST
        fromService:
          type: redis
          name: airman-redis
          property: host

      - key: REDIS_PORT
        value: 6379

      - key: JWT_PUBLIC_KEY
        value: super-secret-key

# -------------------------------
# PostgreSQL Database (Valid for 90 days on Free Tier)
# -------------------------------
databases:
  - name: airman-db
    plan: free

# -------------------------------
# Redis Instance
# -------------------------------
redis:
  - name: airman-redis
    plan: free
